{% extends "core/base.html" %}
{% load static %}

{% block head %}
<script src="https://unpkg.com/htmx.org@2.0.2"></script>
<script src="https://unpkg.com/hyperscript.org@0.9.12"></script>
<script src="https://unpkg.com/leaflet@1.9.4"></script>
<script src="{% static 'core/index.js' %}" defer></script>
<title>munchie.online</title>
{% endblock %}

{% block body %}
<div id='body'>
  <div id='header'>
    <h1 id='title'>munchie.online</h1>
  </div>
  <div id='left'>
    <div id='auth'>
      {% if user.is_authenticated %}
      <p>Logged in as {{user}}</p>
      <form method='post' action='{% url "core:logout" %}'>
        {% csrf_token %}
        <button type='submit'>logout</button>
      </form>
      {% else %}
      <p><a href='{% url "core:login" %}'>login</a></p>
      <p><a href='{% url "core:new_user" %}'>create account</a></p>
      {% endif %}
    </div>
    <div>search: ________________</div>
    <a href='{% url "core:user_detail" username=user.username %}'>profile</a>
    <a href='{% url "core:lists" %}'>lists</a>
    <a href='{% url "core:new_log" %}'>LOG A FEED</a>
    <a href='{% url "core:new_list" %}'>CREATE A LIST</a>
    <a href='{% url "core:new_restaurant" %}'>Add a restaurant</a>
  </div>
  <div id='content'>
  </div>
  <div id='right'>
    <h1>Restaurants</h1>
    <div id='restaurants'>
      {% for restaurant in restaurants %}
        <p>{{ restaurant.name }}</p>
      {% endfor %}
    </div>
    <h1>Latest reviews</h1>
    <div id='reviews'>
      {% for review in new_reviews %}
      <div class='review'>
        <p>{{ review.restaurant.name }}</p>
        <p>{{ review.text }}</p>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
